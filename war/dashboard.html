<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>WebPaige :: Dashboard</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="WebPaige" name="description">
  <meta content="Cengiz Ulusoy" name="author">
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link href="css/bootstrap-responsive.css" rel="stylesheet">
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link href="img/ico/favicon.ico" rel="shortcut icon">
  <link href="img/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
  <link href="img/ico/apple-touch-icon-114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
  <link href="img/ico/apple-touch-icon-72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
  <link href="img/ico/apple-touch-icon-57-precomposed.png" rel="apple-touch-icon-precomposed"><!-- Timeline --></head>

<body>
  <div class="navbar navbar-fixed-top navbar-inner container-fluid">
    <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"></a> <a class="brand" href="dashboard.html">WebPaige</a>

    <div class="btn-group pull-right">
      <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-user"></i> <span id="d_username">{Username}</span> <span class="caret"></span></a>
      <ul class="dropdown-menu">
        <li><a href="profile.html"><i class="icon-user"></i> Profile</a></li>
        <li><a href="settings.html"><i class="icon-cog"></i> Settings</a></li>
        <li><a href="help.html"><i class="icon-info-sign"></i> Help</a></li>
        <li class="divider"></li>
        <li><a href="logout.html"><i class="icon-off"></i> Sign Out</a></li>
      </ul>
    </div>

    <div class="nav-collapse">
      <ul class="nav">
        <li class="active"><a href="dashboard.html">Dashboard</a></li>
        <li><a href="messages.html">Messages</a></li>
        <li><a href="todos.html">Todos</a></li>
        <li><a href="groups.html">Groups</a></li>
        <li><a href="tasks.html">Tasks</a></li>
        <li><a href="appointments.html">Appointments</a></li>
        <li><a href="alarms.html">Alarms</a></li>
        <li><a href="orders.html">Orders</a></li>
        <li><a href="deliveries.html">Deliveries</a></li>
        <li><a href="states.html">States</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span12 well">
        <div class="btn-group btn-hanging">
          <a class="btn" href="appointments.html"><i class="icon-calendar"></i> My appointments</a>
        </div>

        <h2><span class="entypo eMedium">P</span> Upcoming events</h2>
        <hr>

        <div id="mytimeline"></div>
      </div><!--/span-->
    </div>

    <div class="row-fluid">
      <div class="span6 well">
        <h2><span class="entypo eMedium">+</span> Your states</h2>
        <hr>

        <p>Here comes some more information about the states.</p>

        <div class="btn-toolbar" style="margin-top: 18px;">
          <div class="btn-group">
            <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="icon-road"></i> Activity <span class="caret"></span></button>

            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div><!-- /btn-group -->

          <div class="btn-group">
            <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i> Social <span class="caret"></span></button>

            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div><!-- /btn-group -->

          <div class="btn-group">
            <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="icon-time"></i> Availability <span class="caret"></span></button>

            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div><!-- /btn-group -->

          <div class="btn-group">
            <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="icon-map-marker"></i> Location <span class="caret"></span></button>

            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div><!-- /btn-group -->
        </div><!-- /btn-toolbar -->
      </div><!--/span-->

      <div class="span6 well">
        <div class="btn-group btn-hanging">
          <a class="btn" href="messages.html"><i class="icon-comment"></i> All messages</a>
        </div>

        <h2><span class="entypo eMedium">:</span> Latest Messages</h2>
        <hr>

        <div class="alert alert-info">
          <button class="close" data-dismiss="alert" type="button">Ã—</button>
          You have a request to postpone your meeting with Kees to friday the 12th of april. Do you accept this request?
        </div>

        <div class="btn-group pull-left">
          <a class="btn" href=""><i class="icon-ok-sign"></i> Yes</a>
          <a class="btn" href="appointments.html"><i class="icon-info-sign"></i>  Go to appointment</a>
          <a class="btn" href=""><i class="icon-remove-sign"></i>  No</a>
        </div>

        <div class="btn-group pull-right">
          <a class="btn" href="#"><i class="icon-chevron-left"></i></a>
          <a class="btn" href="#"><i class="icon-chevron-right"></i></a>
        </div>
      </div><!--/span-->
    </div>

    <footer>
      <p>Ask Community Systems 2012, WebPaige v1.0<br>
      <img alt="Ask Community Systems" src="img/company_logo.png"></p>
    </footer>
  </div><!--/.fluid-container-->
  
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="js/jquery-1.7.2.min.js"></script><script src="js/bootstrap.js"></script>

  <script src="http://www.google.com/jsapi" type="text/javascript"></script>
  <script src="js/timeline/timeline.js" type="text/javascript"></script>
  <link href="js/timeline/timeline.css" rel="stylesheet" type="text/css">
  <script src="js/timeline/timeline_init.js" type="text/javascript"></script>
  
  <script src="js/libs/ask.session.js" type="text/javascript"></script>
  <script src="js/libs/json2.js" type="text/javascript"></script>
  <script src="js/custom.js"></script>
  
  <script type="text/javascript">
  
    $(document).ready(function() {
      //checkLogin();
      loadInfo();
    });
    
    var session = new ask.session(showLogin);
    session.getSession();

		/*
		function checkLogin() {
			if (!localStorage.getItem('loggedIn')) {
					document.location = "login.html";
			}
		}
		*/

    function showLogin() {
      document.location = 'login.html';
    }

    function loadInfo() {
      $.ajax({
        url: host + '/resources',
        beforeSend: function(xhr) {
          xhr.setRequestHeader('X-SESSION_ID', session.getSession());
          return true;
        },
        contentType: 'application/json',
        xhrFields: {
          withCredentials: true
        },
        success: function(jsonData) {
          renderInfo(jsonData);
        },
        error: function() {
          document.location = "login.html";
        }
      });
    }

    function renderInfo(data) {
      console.log(data);
      $("#d_username").setVal(data.name);
    }
  
  </script>

</body>
</html>